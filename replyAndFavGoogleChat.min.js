var scriptV="v2.0.0",FAV_ACTION_CLASS="fav-container",DATE_CLASS="b8Cb3d",MSG_DATE_JSNAME="E53oB",ACTION_CLASS_1="mUbCce",ACTION_CLASS_2="orLAid",CUSTOM_CLASS="reply-container",ICON_CLASS_1="mUbCce",ICON_CLASS_2="fKz7Od",ICON_CLASS_3="OniOhf",ICON_CLASS_4="n8aqX",ACTIONS_CONTAINER_JSNAME="jpbBj",ICON_SPAN_1_CLASS="xjKiLb",ICON_SVG_CLASS="f8lxbf",TEXT_INPUT_JSNAME="g1zMPd",TEXT_PARENT_CONTAINER="PjTrEc",TEXT_PLACEHOLDER_JSNAME="LT24l",TEXT_PLACEHOLDER_HIDE_CLASS="qs41qe",AUTHOR_CONTAINER_JSNAME="Ne3sFf",TEXT_TO_REPLY_ELEMENT="bgckF",favContainerStyle='\n\tfont-family: "Google Sans", Arial, sans-serif;\n\tcolor: rgb(60, 64, 67);\n\tfont-size: 14px;\n\tline-height: 1.25rem;\n\tletter-spacing: 0.25px;\n\tpadding: 8px;\n\tposition: absolute;\n\tright: 90px;\n\ttop: 100%;\n\tbackground-color: white;\n\tborder: 1px solid rgb(218, 220, 224);\n\tborder-radius: 0px 0px 15px 15px;\n\tdisplay: flex;\n\talign-items: center;\n',favMsgStyle="\n\tcursor: pointer;\n\tdisplay: flex;\n    align-items: center;\n",msgListStyle='\n\tfont-family: "Google Sans", Arial, sans-serif;\n\tcolor: rgb(60, 64, 67);\n\tfont-size: 14px;\n\tline-height: 1.25rem;\n\tletter-spacing: 0.25px;\n\ttext-align: left;\n\tdisplay: flex;\n\tflex-direction: column;\n\tmargin-bottom: 20px;\n\tpadding: 10px 0px;\n\tborder: 2px solid #ccc;\n\tborder-radius: 15px;\n\tmax-height: 35vh;\n\tmin-height: 20vh;\n\toverflow-y: scroll;\n',buttonStyle='\n\tfont-family: "Google Sans", Arial, sans-serif;\n\tfont-size: 14px;\n\tline-height: 1.25rem;\n\tletter-spacing: 0.25px;\n\tbackground-color: white;\n\tborder: 1px solid rgb(218, 220, 224);\n\tborder-radius: 15px;\n\tpadding: 2px 20px;\n',favMsgContainerStyle="\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: space-between;\n\tmargin-top: 10px;\n\tpadding: 10px;\n\tbackground-color: #e4f7fb;\n\talign-items: center;\n",settingsContainerStyle="\n\tdisplay: flex;\n\tmargin-left: 15px;\n\tcursor:pointer;\n",overlayDivStyle="\n\tposition: fixed;\n\twidth: 100%;\n\theight: 100%;\n\ttop: 0;\n\tleft: 0;\n\tright: 0;\n\tbottom: 0;\n\tbackground-color: rgba(0,0,0,0.5);\n\tz-index: 2;\n\ttext-align: -webkit-center;\n\tdisplay: none\n",overlayContainerStyle="\n\ttext-align: center;\n\tmargin-top: 27vh;\n\tpadding: 5vh;\n\tbackground-color: white;\n\twidth: 55%;\n\tmax-height: 50%;\n\toverflow: hidden;\n\tborder-radius: 20px;\n",importFileButtonContainerStyle="\n\tdisplay: flex;\n\theight: 30vh;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\tmargin: 8px;\n";function addFavClickHandler(e){e.onclick=(()=>{let t=getTextToSaveAsFav(e),n=getTextAuthor(e),a=getTextDate(e);addFavMsg({author:n,datetime:a,quotedText:t}),e.querySelector("path").firstElementChild.beginElement()})}function getFavStorage(){return localStorage.getItem("favMsgs")?JSON.parse(localStorage.getItem("favMsgs")):{}}function saveFavStorage(e,t){t||(e.timestamp=Date.now());let n=JSON.stringify(e);localStorage.setItem("favMsgs",n),saveBackUpOnDrive&&(isInDrive?updateFile(fileId,n,setDriveInfo):insertFile(n,setDriveInfo))}function addFavMsg(e){let t=getCurrentRoomId(),n=getFavStorage();n[t]?n[t].push(e):n[t]=[e],saveFavStorage(n)}function updateMsgForCurrentRoom(e){e=e.filter(e=>!!e);let t=getCurrentRoomId(),n=getFavStorage();n[t]?(n[t]=e,saveFavStorage(n)):console.error(`No se encontraron mensajes para la sala ${t}`)}function getCurrentRoomId(){return document.URL.split(/search\/|room\/|dm\//g)[1].split("/")[0]}function getFavsForRoom(e){return getFavStorage()[e]||[]}function checkFirstTimeLoad(){getFavStorage().hideWarning||openNoStorageWarning()}function openNoStorageWarning(){let e=document.createElement("div");e.innerHTML='\n\t\t<h1 style="font-family:\'Google Sans\', Arial, sans-serif;color: rgb(60, 64, 67);font-size: 1.25rem;font-weight: 500;color: #5f6368;">No hay mensajes destacados aún, puede que necesites importar la copia de respaldo</h1>\n\t\t<div style="display: flex;flex-direction:column;padding: 15px; text-align:left">\n\t\t\t<span style="margin: 10px 0px">\n\t\t\t\t<p style="font-family:\'Google Sans\', Arial, sans-serif;color: rgb(60, 64, 67);font-size: 15px;line-height: 1.25rem;letter-spacing: 0.25px;">\n\t\t\t\t\tNo hay información de mensajes destacados en este navegador, si ya usaste los mensajes destacados anteriormente te sugerimos importar la copia de respaldo haciendo click en el ícono de configuraciones de Destacados\n\t\t\t\t</p>\n\t\t\t</span>\n\t\t\t<div style="font-family:\'Google Sans\', Arial, sans-serif;color: rgb(60, 64, 67);font-size: 15px">\n\t\t\t\t<input id="hide-warning" type="checkbox" checked>No volver a mostrar este mensaje en este navegador</input>\n\t\t\t</div>\n\t\t</div>\n\t',e.style="\n\t\tdisplay:flex;\n\t\tflex-direction: column;\n\t\tpadding: 10px;\n\t",toggleModal(e,closeWarningHandler)}function closeWarningHandler(){let e=document.getElementById("hide-warning"),t=getFavStorage();t.hideWarning=e.checked,saveFavStorage(t),toggleModal()}const overlayDiv=document.createElement("div");let displayBool=!1;function styleOverlay(){document.querySelector("#container").style=overlayContainerStyle}function displayOverlay(e,t){displayBool?(overlayDiv.innerHTML="",overlayDiv.appendChild(createFavMsgContainer(e,t)),styleOverlay(),overlayDiv.style.display="block"):overlayDiv.style.display="none"}function createFavMsgContainer(e,t){let n=document.createElement("div");n.id="container";let a=document.createElement("button");a.textContent="Cerrar",a.id="modal-close-btn",a.style=buttonStyle,a.onclick=t||(()=>toggleModal()),n.appendChild(e);let o=document.createElement("div");return o.appendChild(a),n.appendChild(o),n}function createFavMsgSettingsContainer(){let e;return window.File&&window.FileReader&&window.FileList&&window.Blob?e=createSettingsContainer():(e=document.createElement("div")).innerText="El browser no soporta la API para cargar archivos",e}function createFavSettingsButtonContainer(){let e=document.createElement("div");e.appendChild(createFavSettingsButton());let t=createFavMsgSettingsContainer();return e.onclick=(()=>{toggleModal(t),setFavSettingsHandlers()}),e.style=settingsContainerStyle,e}function createFavSettingsButton(){let e=document.createElementNS("http://www.w3.org/2000/svg","svg");return e.setAttribute("viewBox","0 0 24 24"),e.innerHTML='\n\t<path d="M13.9,22.5h-3.7c-0.7,0-1.4-0.5-1.4-1.3l-0.3-1.9c-0.3-0.1-0.5-0.3-0.8-0.5l-1.8,0.7c-0.7,0.3-1.5,0-1.8-0.6  \n\t\tl-1.8-3.2c-0.4-0.7-0.2-1.4,0.4-1.9l1.5-1.2c0-0.1,0-0.3,0-0.5c0-0.1,0-0.3,0-0.5l-1.5-1.2C2,10.1,1.8,9.3,2.2,8.7l1.8-3.2  \n\t\tc0.3-0.6,1.1-0.9,1.8-0.6l1.8,0.7c0.3-0.2,0.5-0.3,0.8-0.5l0.3-1.9C8.8,2.5,9.4,2,10.1,2h3.7c0.7,0,1.4,0.5,1.4,1.3l0.3,1.9  \n\t\tc0.3,0.1,0.5,0.3,0.8,0.5l1.8-0.7c0.7-0.3,1.5,0,1.8,0.7l1.8,3.2c0.4,0.7,0.2,1.4-0.4,1.9l-1.5,1.2c0,0.1,0,0.3,0,0.5s0,0.3,0,0.5  \n\t\tl1.5,1.2c0.6,0.4,0.7,1.2,0.4,1.9L20,19c-0.3,0.6-1.1,0.9-1.8,0.6l-1.8-0.7c-0.3,0.2-0.5,0.3-0.8,0.5l-0.3,1.9  \n\t\tC15.2,22,14.6,22.5,13.9,22.5z M13.3,21L13.3,21L13.3,21z M10.7,20.9L10.7,20.9C10.7,21,10.7,21,10.7,20.9z M10.6,20.5h2.8l0.4-2.5  \n\t\tl0.5-0.2c0.4-0.2,0.9-0.4,1.3-0.8l0.4-0.3l2.4,1l1.4-2.4l-2-1.6l0.1-0.6c0-0.3,0.1-0.5,0.1-0.8c0-0.3,0-0.5-0.1-0.8l-0.1-0.6l2-1.6  \n\t\tl-1.4-2.4l-2.4,1l-0.4-0.3c-0.4-0.3-0.9-0.6-1.3-0.8l-0.5-0.2L13.4,4h-2.8l-0.4,2.5L9.7,6.8C9.3,6.9,8.8,7.2,8.4,7.5L7.9,7.9  \n\t\tL5.6,6.9L4.2,9.3l2,1.6l-0.1,0.6c0,0.3-0.1,0.5-0.1,0.8s0,0.5,0.1,0.8l0.1,0.6l-2,1.6l1.4,2.4l2.4-1L8.4,17c0.4,0.3,0.9,0.6,1.3,0.8  \n\t\tl0.5,0.2L10.6,20.5z M18.2,18C18.2,18,18.2,18,18.2,18L18.2,18z M5.8,18L5.8,18C5.8,18,5.8,18,5.8,18z M18.2,6.5  \n\t\tC18.2,6.5,18.2,6.5,18.2,6.5L18.2,6.5z M5.8,6.5L5.8,6.5C5.8,6.5,5.8,6.5,5.8,6.5z M13.3,3.5L13.3,3.5L13.3,3.5z M12,8.7  \n\t\tc-1.3,0-2.4,0.7-3,1.8c-0.6,1.1-0.6,2.4,0,3.5c0.6,1.1,1.8,1.8,3,1.8c1.9,0,3.5-1.6,3.5-3.5S13.9,8.7,12,8.7z" stroke="#5f6368" stroke-width="0.5">\n\t</path>\n\t',e.classList.add(ICON_SVG_CLASS),e}function createSettingsContainer(){let e=document.createElement("div");return e.innerHTML='\n\t\t<h1 style="font-family:\'Google Sans\', Arial, sans-serif;color: rgb(60, 64, 67);font-size: 1.25rem;font-weight: 500;color: #5f6368;">Configuración mensajes destacados</h1>\n\t\t<div style="display: flex;flex-direction:column;padding: 15px; text-align:left">\n\t\t\t<div style="font-family:\'Google Sans\', Arial, sans-serif;color: rgb(60, 64, 67);font-size: 15px;line-height: 1.25rem;letter-spacing: 0.25px; height:100%; margin-bottom: 10px">\n\t\t\t\t<label for="file-upload" id="import_fav_msgs" style="margin-bottom: 8px;">Para restaurar una copia de los mensajes destacados, tenés que importar el archivo <b>gchatFavMsgsBackup.json</b> que está en tu Google Drive</label>\n\t\t\t\t<input style="margin-top: 8px" type="file" accept=".json" class="import-button" id="file-upload"></input>\n\t\t\t\t<div id="file-upload-success" style="display: none;">✔️</div>\n\t\t\t</div>\n\t\t\t<div style="font-family:\'Google Sans\', Arial, sans-serif;color: rgb(60, 64, 67);font-size: 15px; height:100%">\n\t\t\t\t<input id="save-on-drive" type="checkbox">No guardar copia de respaldo en Google Drive</input>\n\t\t\t</div>\n\t\t</div>\n\t',e.style="\n\t\tdisplay:flex;\n\t\tflex-direction: column;\n\t\tpadding: 10px;\n\t",e}function setFavSettingsHandlers(){document.getElementById("file-upload").onchange=importFile,document.getElementById("save-on-drive").onchange=updateSaveOnDrive}function importFile(e){var t=new FileReader;t.onload=importFavMsgsFromFile,t.readAsText(e.target.files[0])}function updateSaveOnDrive(e){let t=document.getElementById("save-on-drive");saveBackUpOnDrive=t.checked}function toggleModal(e,t){displayBool=!displayBool,displayOverlay(e,t)}function addFavMsgToContainer(){let e=document.createElement("div");return e.style=msgListStyle,appendMessages(getFavsForRoom(getCurrentRoomId()),e),e}function appendMessages(e,t){if(0===e.length){let e=document.createElement("div");e.style=favMsgContainerStyle,e.innerHTML="<i><b>Aún no hay mensajes destacados en esta sala.</b></i>",t.appendChild(e)}else e.forEach((n,a)=>{let o=document.createElement("div");o.style=favMsgContainerStyle;let r=document.createElement("span"),i=document.createElement("div"),l=document.createElement("button");l.style=buttonStyle,l.textContent="Quitar",l.onclick=(()=>{e[a]=null,updateMsgForCurrentRoom(e),o.remove()}),i.appendChild(l),r.innerHTML=`<b>${n.author}</b><span class='${DATE_CLASS}'> ${n.datetime}:</span><br>${n.quotedText}`,o.appendChild(r),o.appendChild(i),t.appendChild(o)})}function createFavButton(){let e=document.createElement("div");e.style=favContainerStyle;let t=document.createElement("div");t.id="fav-msg-button",t.style=favMsgStyle,t.innerHTML="Destacados",t.onclick=(()=>{toggleModal(addFavMsgToContainer())});let n=createSvgIconContainer(createFavIcon(!1),FAV_ACTION_CLASS);t.appendChild(n);let a=document.createElement("div");a.appendChild(t),e.appendChild(a),e.appendChild(createFavSettingsButtonContainer());let o=document.querySelectorAll("[role=banner]");o[o.length-1].appendChild(e)}function importFavMsgsFromFile(e){console.log(e.target.result),saveFavStorage(JSON.parse(e.target.result),!0),document.getElementById("file-upload").style="display: none",document.getElementById("file-upload-success").style="display: block"}overlayDiv.style=overlayDivStyle,document.querySelector("body").appendChild(overlayDiv);var isInDrive=!1,saveBackUpOnDrive=!0,fileId=0;function checkDriveStatus(){getFileInfo().then(e=>{e.result&&e.result.files&&e.result.files.length>0&&setDriveInfo(e.result.files[0])})}function setDriveInfo(e){fileId=e.id||0,isInDrive=!!e.id}function getFileInfo(){return gapi.client.request({path:"https://www.googleapis.com/drive/v3/files",method:"GET",params:{q:"name = 'gchatFavMsgsBackup.json'"}})}function insertFile(e,t){const n="-------314159265358979323846",a="\r\n--"+n+"\r\n";var o={title:"gchatFavMsgsBackup.json",mimeType:"application/json"},r=btoa(unescape(encodeURIComponent(e))),i=a+"Content-Type: application/json\r\n\r\n"+JSON.stringify(o)+a+"Content-Type: application/json\r\nContent-Transfer-Encoding: base64\r\n\r\n"+r+"\r\n---------314159265358979323846--";t||(t=function(e){console.log(e)}),gapi.client.request({path:"/upload/drive/v2/files",method:"POST",params:{uploadType:"multipart"},headers:{"Content-Type":'multipart/mixed; boundary="'+n+'"'},body:i}).execute(t)}function updateFile(e,t,n){const a="-------314159265358979323846",o="\r\n--"+a+"\r\n";var r=o+"Content-Type: application/json\r\n\r\n"+o+"Content-Type: application/json\r\nContent-Transfer-Encoding: base64\r\n\r\n"+btoa(unescape(encodeURIComponent(t)))+"\r\n---------314159265358979323846--";n||(n=function(e){console.log(e)}),gapi.client.request({path:"/upload/drive/v2/files/"+e,method:"PUT",params:{uploadType:"multipart",alt:"json"},headers:{"Content-Type":'multipart/mixed; boundary="'+a+'"'},body:r}).execute(n)}function init(){console.log("Adding fav and reply button...");let e=getMessageActionsContainers();e.reply.forEach(addReplyActionToActionContainer),e.fav.forEach(addFavActionToActionContainer),addChangeConversationListener(),addNewMessagesListener(),createFavButton(),checkDriveStatus(),checkFirstTimeLoad(),console.log(`Done :) ${scriptV}`)}function getMessageActionsContainers(){let e=document.querySelectorAll(`[jsname=${ACTIONS_CONTAINER_JSNAME}]`),t=new Array,n=new Array;return e.forEach(e=>{e.querySelector("."+CUSTOM_CLASS)||t.push(e),e.querySelector("."+FAV_ACTION_CLASS)||n.push(e)}),{reply:t,fav:n}}function addReplyActionToActionContainer(e){if(!e.querySelector("."+CUSTOM_CLASS)){let t=createSvgIconContainer(createReplyIcon(),CUSTOM_CLASS);addReplyClickHandler(t),e.insertBefore(t,e.firstChild)}}function createReplyIcon(){let e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttribute("viewBox","0 0 24 24");let t=document.createElementNS("http://www.w3.org/2000/svg","path");return t.setAttribute("d","m0.65747,7.18454l7.33102,6.1939c0.34037,0.28757 0.8902,0.08848 0.8902,-0.30969l0,-3.14119c0.15709,0 0.31419,-0.02212 0.4451,-0.02212c3.35132,0 6.07427,2.27847 6.07427,5.06572c0,1.1503 -0.47128,2.14574 -1.41384,3.09695c-0.36655,0.35394 0.13091,0.90696 0.62837,0.68575c3.29896,-1.41575 5.26263,-4.04815 5.26263,-7.0345c0,-4.46845 -4.37243,-8.07419 -9.76597,-8.07419c-0.41892,0 -0.86401,0.02212 -1.23056,0.06636l0,-3.03059c0,-0.39818 -0.54983,-0.59727 -0.8902,-0.30969l-7.33102,6.1939c-0.20946,0.17697 -0.20946,0.44242 0,0.61939zm1.09965,-0.30969l6.07427,-5.13209l0,2.47756c0,0.26545 0.288,0.48666 0.62837,0.44242c0.41892,-0.06636 1.04729,-0.15485 1.67566,-0.15485c4.79135,0 8.6925,3.22967 8.6925,7.21147c0,2.01302 -1.02111,3.87119 -2.8015,5.17633c0.26182,-0.59727 0.41892,-1.23878 0.41892,-1.90241c0,-3.29604 -3.19423,-5.95057 -7.12156,-5.95057c-0.81165,0 -1.49239,0 -1.49239,0.48666l0,2.47756l-6.07427,-5.13209z"),t.setAttribute("stroke","#5f6368"),t.setAttribute("stroke-width","0.9"),e.appendChild(t),e.classList.add(ICON_SVG_CLASS),e}function addReplyClickHandler(e){e.onclick=(()=>{let t=getTextElement(e),n=getTextToReply(e),a=getTextAuthor(e);t.innerHTML="_"+a+" dijo:_ &#8628;<br/>```"+`${n}`+"```<br/>",getTextPlaceHolder().classList.remove(TEXT_PLACEHOLDER_HIDE_CLASS),clickOnTextElement(e)})}function getTextElement(e){let t=document.querySelectorAll(`[jsname=${TEXT_INPUT_JSNAME}]`);if(1==t.length)return t[0];t=e.closest(`[jsname=${TEXT_PARENT_CONTAINER}]`).querySelectorAll(`[jsname=${TEXT_INPUT_JSNAME}]`);return t[0]}function getTextParentContainer(e){return e.closest("[jsname=o7uNDd]")}function replaceAnchorLink(e){return e.replace(/(<a [^>]*href="([^>^\"]*)"[^>]*>)([^<]+)(<\/a>)/gi,"$2")}function replaceSpanTag(e){return e.replace(/(<span [^>]*[^>]*>)([^<]+)(<\/span>)/gi,"$2")}function replaceFormatTags(e){let t=e.replace(/(<[bis]>|<\/[bis]>|\`)/gi,"");return t=replaceSpanTag(replaceAnchorLink(t))}function getTextToReply(e){return replaceFormatTags(getTextParentContainer(e).querySelector("[jsname="+TEXT_TO_REPLY_ELEMENT+"]").innerHTML)}function getTextAuthor(e){return getTextParentContainer(e).closest("[jsname="+AUTHOR_CONTAINER_JSNAME+"]").querySelector("[data-name]").getAttribute("data-name")}function getTextPlaceHolder(){return document.querySelectorAll(`[jsname=${TEXT_PLACEHOLDER_JSNAME}]`)[0]}function clickOnTextElement(e){e.closest(`[jsname=${TEXT_PARENT_CONTAINER}]`).querySelectorAll("[jsname=lDVNne]")[0].click()}function addChangeConversationListener(){document.querySelectorAll("[jsname=uwkwCe]")[0].addEventListener("DOMSubtreeModified",changeConversationHandler,!1)}function changeConversationHandler(){let e=getMessageActionsContainers();e.reply.forEach(addReplyActionToActionContainer),e.fav.forEach(addFavActionToActionContainer),addNewMessagesListener()}function addLoadingMessagesListener(){document.querySelectorAll("[jsname=T2dWE]")[0].addEventListener("DOMSubtreeModified",loadingMoreMessagesHandler,!1)}function loadingMoreMessagesHandler(){let e=getMessageActionsContainers();e.reply.forEach(addReplyActionToActionContainer),e.fav.forEach(addFavActionToActionContainer)}function addNewMessagesListener(){document.querySelector("[jsname=iyUusd]").addEventListener("DOMNodeInserted",loadingMoreMessagesHandler,!1)}function createSvgIconContainer(e,t){let n=document.createElement("div");n.classList.add(ACTION_CLASS_1),n.classList.add(ACTION_CLASS_2),n.classList.add(t);let a=document.createElement("div");a.classList.add(ICON_CLASS_1),a.classList.add(ICON_CLASS_2),a.classList.add(ICON_CLASS_3),a.classList.add(ICON_CLASS_4),a.setAttribute("data-tooltip","Agregar a favoritos");let o=document.createElement("span");o.classList.add(ICON_SPAN_1_CLASS);let r=document.createElement("span");return r.style="top: -10px",r.appendChild(e),o.appendChild(r),a.appendChild(o),n.appendChild(a),n}function addFavActionToActionContainer(e){if(!e.querySelector("."+FAV_ACTION_CLASS)){let t=createSvgIconContainer(createFavIcon(!0),FAV_ACTION_CLASS);addFavClickHandler(t),e.insertBefore(t,e.firstChild)}}function getTextToSaveAsFav(e){return replaceFormatTags(getTextParentContainer(e).querySelector("[jsname="+TEXT_TO_REPLY_ELEMENT+"]").innerHTML)}function createFavIcon(e){let t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("viewBox","0 0 24 24");let n=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttribute("d","M 20.6789 7.2115 c -0.2996 -0.2637 -0.6688 -0.4336 -1.0672 -0.4915 l -4.8777 -0.7086 L 12.5523 1.5911 c -0.178 -0.3611 -0.4538 -0.6596 -0.7971 -0.8632 c -0.3184 -0.1887 -0.6834 -0.2886 -1.0559 -0.2886 s -0.7371 0.0999 -1.0559 0.2886 c -0.3433 0.2036 -0.6191 0.5022 -0.7971 0.8632 l -2.1814 4.42 L 1.7876 6.72 c -0.3984 0.0579 -0.7673 0.2278 -1.0672 0.4915 c -0.2779 0.2445 -0.4858 0.5608 -0.601 0.9148 c -0.1151 0.354 -0.1329 0.7317 -0.0515 1.0932 c 0.0874 0.3895 0.2861 0.7438 0.5747 1.0249 l 3.5297 3.4405 L 3.3389 18.5431 c -0.1034 0.602 0.0625 1.214 0.4545 1.6792 c 0.3952 0.4688 0.9716 0.7374 1.5818 0.7374 c 0.3323 0 0.6649 -0.0824 0.9617 -0.2385 l 4.3627 -2.2937 l 4.3627 2.2937 c 0.2967 0.156 0.6294 0.2385 0.9617 0.2385 c 0.6102 0 1.1866 -0.2687 1.5818 -0.7374 c 0.3923 -0.4652 0.558 -1.0772 0.4545 -1.6792 l -0.833 -4.8581 l 3.5297 -3.4405 c 0.2882 -0.2811 0.4869 -0.6354 0.5747 -1.0249 c 0.0814 -0.3614 0.0633 -0.7392 -0.0515 -1.0932 C 21.1647 7.7723 20.9568 7.456 20.6789 7.2115 z M 19.6942 9.1541 L 15.7959 12.9539 c -0.1283 0.1247 -0.1866 0.3049 -0.1564 0.4812 l 0.9201 5.3653 c 0.0604 0.3515 -0.2189 0.6369 -0.5359 0.6369 c -0.0835 0 -0.1699 -0.0199 -0.253 -0.0636 l -4.8183 -2.5332 c -0.0793 -0.0416 -0.1663 -0.0625 -0.253 -0.0625 s -0.1738 0.021 -0.253 0.0625 l -4.8183 2.5332 c -0.0832 0.0437 -0.1695 0.0636 -0.253 0.0636 c -0.317 0 -0.596 -0.2854 -0.5359 -0.6369 l 0.9201 -5.3653 c 0.0302 -0.1763 -0.0281 -0.3565 -0.1564 -0.4812 L 1.7051 9.1541 c -0.3227 -0.3145 -0.1446 -0.8625 0.3014 -0.9276 l 5.387 -0.7829 c 0.177 -0.0256 0.3302 -0.1368 0.4094 -0.2975 l 2.4092 -4.8816 c 0.0999 -0.2022 0.2936 -0.3031 0.4876 -0.3031 c 0.194 0 0.3877 0.1009 0.4876 0.3031 l 2.4092 4.8816 c 0.0793 0.1603 0.2324 0.2719 0.4094 0.2975 l 5.387 0.7829 C 19.8388 8.2915 20.0168 8.8396 19.6942 9.1541 z"),n.setAttribute("stroke","#5f6368"),n.setAttribute("stroke-width","0.5"),e&&n.appendChild(createFavIconAnimation()),t.appendChild(n),t.classList.add(ICON_SVG_CLASS),t}function createFavIconAnimation(){let e=document.createElementNS("http://www.w3.org/2000/svg","animateTransform");return e.setAttribute("attributeType","XML"),e.setAttribute("attributeName","transform"),e.setAttribute("type","rotate"),e.setAttribute("from","0 11 11"),e.setAttribute("to","360 11 11"),e.setAttribute("begin","indefinite"),e.setAttribute("dur","1s"),e}function getTextDate(e){let t=getTextParentContainer(e);return new Date(1*t.querySelector("[jsname="+MSG_DATE_JSNAME+"]").getAttribute("data-absolute-timestamp")).toLocaleString("es-AR")}function addFavClickHandler(e){e.onclick=(()=>{let t=getTextToSaveAsFav(e),n=getTextAuthor(e),a=getTextDate(e);addFavMsg({author:n,datetime:a,quotedText:t}),e.querySelector("path").firstElementChild.beginElement()})}function addFavMsg(e){let t=getCurrentRoomId(),n=getFavStorage();n[t]?n[t].push(e):n[t]=[e],saveFavStorage(n)}init();